(function(b){function a(d,f){f=b.extend(true,b.fn.zoomer.defaults,f);var c=b();var g=d.find("img");g.css("cursor","zoom-in");g.click(function(){e(b(this))});function e(h){c.remove();var i=h.data("origin");if(!i){i=h.attr("src")}c=b("<div>"+'<div style="text-align: center;color: #ddd;position: absolute;left: 0;right: 0;top: 40%;">加载中...</div>'+'<img src="'+i+'" style="max-width: 100%;max-height: 100%;display: none"/></div>').css({position:"fixed",left:0,top:0,bottom:0,right:0,color:"#fff",zIndex:9999,cursor:"zoom-out",background:"rgba(0, 0, 0, 0.4)",textAlign:"center"});b("body").append(c);c.find("img").load(function(){b(this).parents("div").find("div").css({"display":"none"});b(this).css({"display":"inline-block"})});c.find("img").error(function(){if(f.failure&&typeof f.failure==="function"){f.failure(b(this),g,d,c)}b(this).parents("div").find("div").html("加载失败！")});c.click(function(){c.remove()})}}b.fn.zoomer=function(c){return this.each(function(){b(this).data("zoomer",new a(b(this),c))})};b.fn.zoomer.defaults={failure:null}})(window.jQuery);