(function(b){function a(d,g){g=b.extend(true,b.fn.zoomer.defaults,g);var c=b();var h=d.find("img");h.css("cursor","zoom-in");for(var f=0;f<h.length;f++){b(h[f]).data("index",f)}h.click(function(){e(b(this))});function e(j){c.remove();var k=j.data("origin");if(!k){k=j.attr("src")}var i=j.data("index");c=b("<div>"+'<a href="javascript:" class="zoomer-prev-img" data-index="'+i+'" style="display: none; position: absolute;z-index: 1;text-decoration: none">'+'<i class="fa fa-angle-left" style="color: #fff;display: none"></i></a>'+'<a href="javascript:" class="zoomer-next-img" data-index="'+i+'" style="display: none; position: absolute;z-index: 1;text-decoration: none">'+'<i class="fa fa-angle-right" style="color: #fff;display: none"></i></a>'+'<div style="text-align: center;color: #ddd;position: absolute;left: 0;right: 0;top: 40%;">加载中...</div>'+'<img src="'+k+'" style="max-width: 100%;max-height: 100%;display: none"/></div>').css({position:"fixed",left:0,top:0,bottom:0,right:0,color:"#fff",zIndex:9999,cursor:"zoom-out",background:"rgba(0, 0, 0, 0.4)",textAlign:"center"});b("body").append(c);c.find("img").load(function(){var n=(b(window).height()-b(this).height())/2;var m=(b(window).width()-b(this).width())/2;b(this).parents("div").find(".zoomer-prev-img").css({"display":"inline-block","top":n+"px","left":m+"px","bottom":n+"px","width":b(this).width()/3+"px"}).hover(function(){b(this).css({background:"-webkit-linear-gradient(left, rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0))",background:"-o-linear-gradient(right, rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0))",background:"-moz-linear-gradient(right, rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0))",background:"linear-gradient(to right, rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0))"});b(this).find("i").css({"display":"block"})},function(){b(this).css({"background":"rgba(0, 0, 0, 0.0)"});b(this).find("i").css({"display":"none"})});var l=b(this).parents("div").find(".zoomer-prev-img").height();b(this).parents("div").find(".zoomer-prev-img i").css({"marginTop":l/2-20});b(this).parents("div").find(".zoomer-next-img").css({"display":"inline-block","top":n+"px","right":m+"px","bottom":n+"px","width":b(this).width()/3+"px"}).hover(function(){b(this).css({background:"-webkit-linear-gradient(left, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.3))",background:"-o-linear-gradient(right, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.3))",background:"-moz-linear-gradient(right, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.3))",background:"linear-gradient(to right, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.3))"});b(this).find("i").css({"display":"block"})},function(){b(this).css({"background":"rgba(0, 0, 0, 0.0)"});b(this).find("i").css({"display":"none"})});l=b(this).parents("div").find(".zoomer-next-img").height();b(this).parents("div").find(".zoomer-next-img i").css({"marginTop":l/2-20});b(this).parents("div").find("div").css({"display":"none"});b(this).css({"display":"inline-block","marginTop":n+"px"})});c.find("img").error(function(){if(g.failure&&typeof g.failure==="function"){g.failure(b(this),h,d,c)}b(this).parents("div").find("div").html("加载失败！")});c.click(function(){c.remove()});c.find(".zoomer-prev-img").click(function(){var l=b(this).data("index");if(l===0){c.remove();return}e(b(h[l-1]));return false});c.find(".zoomer-next-img").click(function(){var l=b(this).data("index");if(l===h.length-1){c.remove();return}e(b(h[l+1]));return false})}}b.fn.zoomer=function(c){return this.each(function(){b(this).data("zoomer",new a(b(this),c))})};b.fn.zoomer.defaults={failure:null}})(window.jQuery);